---
import { getCollection } from "astro:content";
import Page from "../layouts/Page.astro";
import { Image } from "astro:assets";

const filesCollection = await getCollection("files");
const folderCollection = await getCollection("folder");
const infileCollection = await getCollection("infile");
---

<Page>
  <h1>astro-loader-i18n</h1>
  <h2>files</h2>
  {
    filesCollection.map((entry) => (
      <>
        <h3>{entry.filePath}</h3>
        <dl>
          {Object.entries(entry.data).map(([key, value]) => (
            <>
              <dt>{key}</dt>
              <dd>{value}</dd>
            </>
          ))}
        </dl>
      </>
    ))
  }
  <h2>folder</h2>
  {
    folderCollection.map((entry) => (
      <>
        <h3>{entry.filePath}</h3>
        <dl>
          {Object.entries(entry.data).map(([key, value]) => (
            <>
              <dt>{key}</dt>
              <dd>{value}</dd>
            </>
          ))}
        </dl>
      </>
    ))
  }
  <h2>infile</h2>
  {
    infileCollection.map((entry) => (
      <>
        <h3>
          {entry.filePath} / {entry.id}
        </h3>
        <dl>
          {Object.entries(entry.data).map(([key, value]) => (
            <>
              <dt>{key}</dt>
              <dd>{JSON.stringify(value, null, 2)}</dd>
              <dt>Icons</dt>
              <dd>
                {Array.isArray(entry.data.navigation)
                  ? entry.data.navigation.map((navItem) => <Image src={navItem.icon} alt={`Icon ${navItem.title}`} width={32} height={32} />)
                  : null}
              </dd>
            </>
          ))}
        </dl>
      </>
    ))
  }
</Page>
